---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Administrator.
--- DateTime: 2020/11/18 16:09
---
local PriceGroups = {}
local MustLotteryPriceConfig = T(Config, "MustLotteryPriceConfig") ---@class MustLotteryPriceConfig

local function init()
    local config = Lib.read_csv_file(Root.Instance():getGamePath() .. "config/common/MustLotteryPrice.csv", 3) or {}
    for _, item in pairs(config) do
        local group = PriceGroups[tostring(item.groupId)] or {}
        local price = {
            id = tonumber(item.id),
            groupSeq = tonumber(item.groupSeq),
            moneyType = tonumber(item.moneyType) or 1,
            price = tonumber(item.price) or 999,
            discountPrice = tonumber(item.discountPrice) or tonumber(item.price),
            hintLang = item.hintLang
        }
        if price.moneyType == 1 then
            price.moneyType = 0
        end
        table.insert(group, price)
        PriceGroups[tostring(item.groupId)] = group
    end
    for _, group in pairs(PriceGroups) do
        table.sort(group, function(a, b)
            return a.groupSeq < b.groupSeq
        end)
    end
end

function MustLotteryPriceConfig:getPriceConfig(groupId, groupSeq)
    local group = PriceGroups[tostring(groupId)]
    if not group then
        return
    end
    return group[groupSeq] or group[#group]
end

init()