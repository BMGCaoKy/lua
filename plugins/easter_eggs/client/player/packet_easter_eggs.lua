---
--- Generated by PluginCreator
--- easter_eggs handler
--- DateTime:2022-03-15
---

local handles = T(Player, "PackageHandlers")

--- @type EasterEggsManager
local EasterEggsManager = T(Lib, "EasterEggsManager")

function handles:onGetEasterEggIncome(packet)
    local player = self
    if player and player:isValid() then
        --Lib.emitEvent(Event.EVENT_EASTER_EGGS_TIPS, string.format(Lang:toText("ui.easter.geteggs"), packet.income))
        -- Plugins.CallTargetPluginFunc("fly_tips", "pushNormalFlyTipsItem", string.format(Lang:toText("easter.egg.income.tip"), packet.income))
    end

    local easterEgg = EasterEggsManager:getEasterEggs(packet.mapType, packet.id)
    easterEgg:receiveSuccess()
end

function handles:onGetEasterEggIncomeFail(packet)
    local easterEgg = EasterEggsManager:getEasterEggs(packet.mapType, packet.id)
    easterEgg:receiveFail()

    local code = packet.code

    if code == 8008 then
        --EasterEggsManager:easterEggLimitMax()
    end
end

function handles:showEasterEggsTips(packet)
    Lib.emitEvent(Event.EVENT_EASTER_EGGS_TIPS, string.format(Lang:toText(packet.content), table.unpack(packet.params or {})))
end

function handles:syncEasterActivityDate(packet)
    Lib.logDebug("syncEasterActivityDate ", Lib.v2s(packet.easterData))
    EasterEggsManager:initActivityDate(packet.easterData)
end