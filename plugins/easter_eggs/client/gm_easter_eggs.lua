---
--- Generated by PluginCreator
--- easter_eggs gm
--- DateTime:2022-03-15
---

local path = Root.Instance():getGamePath():gsub("\\", "/") .. "lua/gm_client.lua"
local file, err = io.open(path, "r")
local GMItem
if file then
    GMItem = require("gm_client")
    file:close()
end
if not GMItem then
    GMItem = GM:createGMItem()
end
--GMItem["easter_eggs/一个彩蛋"] = function()
--end

--- @type EasterEggsManager
local EasterEggsManager = T(Lib, "EasterEggsManager")

---@type EasterEggsRefreshPosConfig
local EasterEggsRefreshPosConfig = T(Config, "EasterEggsRefreshPosConfig")

GMItem["easter_eggs/显示所有彩蛋并显示倒计时UI"] = function()
    local posList = EasterEggsRefreshPosConfig:getAllConfigList()
    local mapName = World.CurMap.name

    for id, posConfig in ipairs(posList) do
        if posConfig.map == mapName then
            local obj = EntityClient.CreateClientEntity({
                cfgName		= "myplugin/easter_egg",
                pos			= Lib.v3(posConfig.pos[1],posConfig.pos[2],posConfig.pos[3]),
                ry 			= 0,
            })

            obj:showEasterEggRefreshTime(id, EasterEggsManager.nextClearTime)
        end
    end
end
