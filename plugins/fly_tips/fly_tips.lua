---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by hlm.
--- DateTime: 2021/3/2 18:23

local FlyTipsHelper
require "fly_tips_define"
if World.isClient then
    require "player.player_fly_tips"
    require "fly_tips_helper"
    require "gm_fly_tips"

    FlyTipsHelper = T(Lib, "FlyTipsHelper")
else
end

local handlers = {}

---发送一条普通飘字提示
function handlers.pushNormalFlyTipsItem(content)
    if World.isClient then
        local itemInfo = { type = 1, content = content }
        FlyTipsHelper:pushOneFlyTipsItem(itemInfo)
    end
end

function handlers.normal(languageKey)
    handlers.pushNormalFlyTipsItem(Lang:toText(languageKey))
end

---发送一条飘字提示
function handlers.pushOneFlyTipsItem(itemInfo)
    if World.isClient then
        -- 老方式的图片文本组合调用重新处理一下
        if itemInfo.type == 2 then
            local flyTipsSetting = World.cfg.fly_tipsSetting or {}
            itemInfo.contentData = {}
            if itemInfo.content1 and itemInfo.content1 ~= "" then
                local tipData = {
                    contentType = Define.FlyTipsContentType.Text,
                    contentInfo = itemInfo.content1,
                    contentColor = flyTipsSetting.gainColor1,
                    contentFont = flyTipsSetting.gainFont1,
                }
                table.insert(itemInfo.contentData, tipData)
            end
            if itemInfo.iconRes and itemInfo.iconRes ~= "" then
                local tipData = {
                    contentType = Define.FlyTipsContentType.Image,
                    contentInfo = itemInfo.iconRes,
                }
                table.insert(itemInfo.contentData, tipData)
            end
            if itemInfo.content2 and itemInfo.content2 ~= "" then
                local tipData = {
                    contentType = Define.FlyTipsContentType.Text,
                    contentInfo = itemInfo.content2,
                    contentColor = flyTipsSetting.gainColor2,
                    contentFont = flyTipsSetting.gainFont2,
                }
                table.insert(itemInfo.contentData, tipData)
            end
            if itemInfo.content3 and itemInfo.content3 ~= "" then
                local tipData = {
                    contentType = Define.FlyTipsContentType.Text,
                    contentInfo = itemInfo.content3,
                    contentColor = flyTipsSetting.gainColor3,
                    contentFont = flyTipsSetting.gainFont3,
                }
                table.insert(itemInfo.contentData, tipData)
            end
        end
        FlyTipsHelper:pushOneFlyTipsItem(itemInfo)
    end
end

---发送一条组合提示
function handlers.pushOneNewFlyTipsItem(itemInfo)
    if World.isClient then
        FlyTipsHelper:pushOneFlyTipsItem(itemInfo)
    end
end

---服务端发送一条普通飘字提示
function handlers.pushServerNormalFlyTipsItem(player, content)
    local itemInfo = { type = 1, content = content }
    local packet = {
        pid = "ClientAddOneNewFlyTips",
        itemInfo = itemInfo,
    }
    player:sendPacket(packet)
end

---服务端发送一条飘字提示
function handlers.pushServerOneFlyTipsItem(player, itemInfo)
    local packet = {
        pid = "ClientAddOneNewFlyTips",
        itemInfo = itemInfo,
    }
    player:sendPacket(packet)
end

return function(name, ...)
    if type(handlers[name]) ~= "function" then
        return
    end
    handlers[name](...)
end