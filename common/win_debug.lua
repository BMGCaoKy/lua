---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 10184.
--- DateTime: 2021/4/1 20:14
---
if PlatformUtil.isPlatformWindows() then
    local file = io.open("gameconfig.json")
    if not file then
        return
    end
    local content = file:read("*a")
    file:close()
    local cjson = require "cjson"
    local ok, data = pcall(cjson.decode, content)
    if not ok then
        return
    end
    local port = World.isClient and 9966 or 9967
    if data.debug_cpath then
        package.cpath = package.cpath .. data.debug_cpath
        local dbg = require('emmy_core')
        local res, _ = pcall(dbg.tcpListen, "localhost", port)
        while not res do
            if World.isClient then
                port = port - 1
            else
                port = port + 1
            end
            res, _ = pcall(dbg.tcpListen, "localhost", port)
        end
    end
end